var markerClusterer=function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=o(t);if(e){var i=o(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t,e){return t(e={exports:{}},e.exports),e.exports}var g=function(t){return t&&t.Math==Math&&t},m=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof p&&p)||function(){return this}()||Function("return this")(),y=function(t){try{return!!t()}catch(t){return!0}},v=!y((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b={}.propertyIsEnumerable,_=Object.getOwnPropertyDescriptor,w={f:_&&!b.call({1:2},1)?function(t){var e=_(this,t);return!!e&&e.enumerable}:b},k=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},M={}.toString,x=function(t){return M.call(t).slice(8,-1)},P="".split,O=y((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==x(t)?P.call(t,""):Object(t)}:Object,C=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},E=function(t){return O(C(t))},S=function(t){return"object"==typeof t?null!==t:"function"==typeof t},A=function(t,e){if(!S(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!S(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!S(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!S(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},L=function(t){return Object(C(t))},j={}.hasOwnProperty,T=Object.hasOwn||function(t,e){return j.call(L(t),e)},I=m.document,N=S(I)&&S(I.createElement),D=function(t){return N?I.createElement(t):{}},F=!v&&!y((function(){return 7!=Object.defineProperty(D("div"),"a",{get:function(){return 7}}).a})),z=Object.getOwnPropertyDescriptor,q={f:v?z:function(t,e){if(t=E(t),e=A(e,!0),F)try{return z(t,e)}catch(t){}if(T(t,e))return k(!w.f.call(t,e),t[e])}},R=function(t){if(!S(t))throw TypeError(String(t)+" is not an object");return t},Z=Object.defineProperty,G={f:v?Z:function(t,e,r){if(R(t),e=A(e,!0),R(r),F)try{return Z(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},B=v?function(t,e,r){return G.f(t,e,k(1,r))}:function(t,e,r){return t[e]=r,t},V=function(t,e){try{B(m,t,e)}catch(r){m[t]=e}return e},U="__core-js_shared__",Q=m[U]||V(U,{}),W=Function.toString;"function"!=typeof Q.inspectSource&&(Q.inspectSource=function(t){return W.call(t)});var J,K,X,H=Q.inspectSource,Y=m.WeakMap,$="function"==typeof Y&&/native code/.test(H(Y)),tt=d((function(t){(t.exports=function(t,e){return Q[t]||(Q[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.14.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),et=0,rt=Math.random(),nt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+rt).toString(36)},it=tt("keys"),ot=function(t){return it[t]||(it[t]=nt(t))},st={},at="Object already initialized",ut=m.WeakMap;if($||Q.state){var ct=Q.state||(Q.state=new ut),ft=ct.get,lt=ct.has,ht=ct.set;J=function(t,e){if(lt.call(ct,t))throw new TypeError(at);return e.facade=t,ht.call(ct,t,e),e},K=function(t){return ft.call(ct,t)||{}},X=function(t){return lt.call(ct,t)}}else{var pt=ot("state");st[pt]=!0,J=function(t,e){if(T(t,pt))throw new TypeError(at);return e.facade=t,B(t,pt,e),e},K=function(t){return T(t,pt)?t[pt]:{}},X=function(t){return T(t,pt)}}var dt,gt,mt={set:J,get:K,has:X,enforce:function(t){return X(t)?K(t):J(t,{})},getterFor:function(t){return function(e){var r;if(!S(e)||(r=K(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},yt=d((function(t){var e=mt.get,r=mt.enforce,n=String(String).split("String");(t.exports=function(t,e,i,o){var s,a=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||T(i,"name")||B(i,"name",e),(s=r(i)).source||(s.source=n.join("string"==typeof e?e:""))),t!==m?(a?!c&&t[e]&&(u=!0):delete t[e],u?t[e]=i:B(t,e,i)):u?t[e]=i:V(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||H(this)}))})),vt=m,bt=function(t){return"function"==typeof t?t:void 0},_t=function(t,e){return arguments.length<2?bt(vt[t])||bt(m[t]):vt[t]&&vt[t][e]||m[t]&&m[t][e]},wt=Math.ceil,kt=Math.floor,Mt=function(t){return isNaN(t=+t)?0:(t>0?kt:wt)(t)},xt=Math.min,Pt=function(t){return t>0?xt(Mt(t),9007199254740991):0},Ot=Math.max,Ct=Math.min,Et=function(t,e){var r=Mt(t);return r<0?Ot(r+e,0):Ct(r,e)},St=function(t){return function(e,r,n){var i,o=E(e),s=Pt(o.length),a=Et(n,s);if(t&&r!=r){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===r)return t||a||0;return!t&&-1}},At={includes:St(!0),indexOf:St(!1)},Lt=At.indexOf,jt=function(t,e){var r,n=E(t),i=0,o=[];for(r in n)!T(st,r)&&T(n,r)&&o.push(r);for(;e.length>i;)T(n,r=e[i++])&&(~Lt(o,r)||o.push(r));return o},Tt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],It=Tt.concat("length","prototype"),Nt={f:Object.getOwnPropertyNames||function(t){return jt(t,It)}},Dt={f:Object.getOwnPropertySymbols},Ft=_t("Reflect","ownKeys")||function(t){var e=Nt.f(R(t)),r=Dt.f;return r?e.concat(r(t)):e},zt=function(t,e){for(var r=Ft(e),n=G.f,i=q.f,o=0;o<r.length;o++){var s=r[o];T(t,s)||n(t,s,i(e,s))}},qt=/#|\.prototype\./,Rt=function(t,e){var r=Gt[Zt(t)];return r==Vt||r!=Bt&&("function"==typeof e?y(e):!!e)},Zt=Rt.normalize=function(t){return String(t).replace(qt,".").toLowerCase()},Gt=Rt.data={},Bt=Rt.NATIVE="N",Vt=Rt.POLYFILL="P",Ut=Rt,Qt=q.f,Wt=function(t,e){var r,n,i,o,s,a=t.target,u=t.global,c=t.stat;if(r=u?m:c?m[a]||V(a,{}):(m[a]||{}).prototype)for(n in e){if(o=e[n],i=t.noTargetGet?(s=Qt(r,n))&&s.value:r[n],!Ut(u?n:a+(c?".":"#")+n,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;zt(o,i)}(t.sham||i&&i.sham)&&B(o,"sham",!0),yt(r,n,o,t)}},Jt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Kt=Array.isArray||function(t){return"Array"==x(t)},Xt=_t("navigator","userAgent")||"",Ht=m.process,Yt=Ht&&Ht.versions,$t=Yt&&Yt.v8;$t?gt=(dt=$t.split("."))[0]<4?1:dt[0]+dt[1]:Xt&&(!(dt=Xt.match(/Edge\/(\d+)/))||dt[1]>=74)&&(dt=Xt.match(/Chrome\/(\d+)/))&&(gt=dt[1]);var te=gt&&+gt,ee=!!Object.getOwnPropertySymbols&&!y((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&te&&te<41})),re=ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ne=tt("wks"),ie=m.Symbol,oe=re?ie:ie&&ie.withoutSetter||nt,se=function(t){return T(ne,t)&&(ee||"string"==typeof ne[t])||(ee&&T(ie,t)?ne[t]=ie[t]:ne[t]=oe("Symbol."+t)),ne[t]},ae=se("species"),ue=function(t,e){var r;return Kt(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Kt(r.prototype)?S(r)&&null===(r=r[ae])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},ce=[].push,fe=function(t){var e=1==t,r=2==t,n=3==t,i=4==t,o=6==t,s=7==t,a=5==t||o;return function(u,c,f,l){for(var h,p,d=L(u),g=O(d),m=function(t,e,r){if(Jt(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}(c,f,3),y=Pt(g.length),v=0,b=l||ue,_=e?b(u,y):r||s?b(u,0):void 0;y>v;v++)if((a||v in g)&&(p=m(h=g[v],v,d),t))if(e)_[v]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:ce.call(_,h)}else switch(t){case 4:return!1;case 7:ce.call(_,h)}return o?-1:n||i?i:_}},le={forEach:fe(0),map:fe(1),filter:fe(2),some:fe(3),every:fe(4),find:fe(5),findIndex:fe(6),filterOut:fe(7)},he=se("species"),pe=function(t){return te>=51||!y((function(){var e=[];return(e.constructor={})[he]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},de=le.map;function ge(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}Wt({target:"Array",proto:!0,forced:!pe("map")},{map:function(t){return de(this,t,arguments.length>1?arguments[1]:void 0)}});var me=function(t){return function(e,r,n,i){Jt(r);var o=L(e),s=O(o),a=Pt(o.length),u=t?a-1:0,c=t?-1:1;if(n<2)for(;;){if(u in s){i=s[u],u+=c;break}if(u+=c,t?u<0:a<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?u>=0:a>u;u+=c)u in s&&(i=r(i,s[u],u,o));return i}},ye={left:me(!1),right:me(!0)},ve=function(t,e){var r=[][t];return!!r&&y((function(){r.call(null,e||function(){throw 1},1)}))},be="process"==x(m.process),_e=ye.left;Wt({target:"Array",proto:!0,forced:!ve("reduce")||!be&&te>79&&te<83},{reduce:function(t){return _e(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var we=le.filter;Wt({target:"Array",proto:!0,forced:!pe("filter")},{filter:function(t){return we(this,t,arguments.length>1?arguments[1]:void 0)}});var ke=function(){function t(r){var n=r.markers,i=r.position;e(this,t),this.markers=n,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}return n(t,[{key:"bounds",get:function(){if(0!==this.markers.length||this._position)return this.markers.reduce((function(t,e){return t.extend(e.getPosition())}),new google.maps.LatLngBounds(this._position,this._position))}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter((function(t){return t.getVisible()})).length}},{key:"push",value:function(t){this.markers.push(t)}},{key:"delete",value:function(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}]),t}(),Me=function(t,e,r,n){var i=xe(t.getBounds(),e,n);return r.filter((function(t){return i.contains(t.getPosition())}))},xe=function(t,e,r){var n=Oe(t,e),i=n.northEast,o=n.southWest,s=Ce({northEast:i,southWest:o},r);return Ee(s,e)},Pe=function(t,e){var r=(e.lat-t.lat)*Math.PI/180,n=(e.lng-t.lng)*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},Oe=function(t,e){return{northEast:e.fromLatLngToDivPixel(t.getNorthEast()),southWest:e.fromLatLngToDivPixel(t.getSouthWest())}},Ce=function(t,e){var r=t.northEast,n=t.southWest;return r.x+=e,r.y-=e,n.x-=e,n.y+=e,{northEast:r,southWest:n}},Ee=function(t,e){var r=t.northEast,n=t.southWest,i=new google.maps.LatLngBounds;return i.extend(e.fromDivPixelToLatLng(r)),i.extend(e.fromDivPixelToLatLng(n)),i},Se=function(){function t(r){var n=r.maxZoom,i=void 0===n?16:n;e(this,t),this.maxZoom=i}return n(t,[{key:"noop",value:function(t){var e=t.markers;return Le(e)}}]),t}(),Ae=function(t){i(o,t);var r=u(o);function o(t){var n;e(this,o);var i=t.viewportPadding,s=void 0===i?60:i,a=ge(t,["viewportPadding"]);return(n=r.call(this,a)).viewportPadding=60,n.viewportPadding=s,n}return n(o,[{key:"calculate",value:function(t){var e=t.markers,r=t.map,n=t.mapCanvasProjection;return r.getZoom()>=this.maxZoom?this.noop({markers:e,map:r,mapCanvasProjection:n}):this.cluster({markers:Me(r,n,e,this.viewportPadding),map:r,mapCanvasProjection:n})}}]),o}(Se),Le=function(t){return t.map((function(t){return new ke({position:t.getPosition(),markers:[t]})}))},je=le.forEach,Te=ve("forEach")?[].forEach:function(t){return je(this,t,arguments.length>1?arguments[1]:void 0)};for(var Ie in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Ne=m[Ie],De=Ne&&Ne.prototype;if(De&&De.forEach!==Te)try{B(De,"forEach",Te)}catch(t){De.forEach=Te}}Wt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Fe=function(t){i(o,t);var r=u(o);function o(t){var n;e(this,o);var i=t.maxDistance,s=void 0===i?4e4:i,a=t.gridSize,u=void 0===a?40:a,c=ge(t,["maxDistance","gridSize"]);return(n=r.call(this,c)).clusters=[],n.maxDistance=s,n.gridSize=u,n}return n(o,[{key:"cluster",value:function(t){var e=this,r=t.markers,n=t.map,i=t.mapCanvasProjection;return this.clusters=[],r.forEach((function(t){e.addToClosestCluster(t,n,i)})),this.clusters}},{key:"addToClosestCluster",value:function(t,e,r){for(var n=this.maxDistance,i=null,o=0;o<this.clusters.length;o++){var s=this.clusters[o],a=Pe(s.bounds.getCenter().toJSON(),t.getPosition().toJSON());a<n&&(n=a,i=s)}if(i&&xe(i.bounds,r,this.gridSize).contains(t.getPosition()))i.push(t);else{var u=new ke({markers:[t]});this.clusters.push(u)}}}]),o}(Ae),ze=function(t){i(o,t);var r=u(o);function o(t){e(this,o);var n=ge(t,[]);return r.call(this,n)}return n(o,[{key:"calculate",value:function(t){var e=t.markers,r=t.map,n=t.mapCanvasProjection;return this.cluster({markers:e,map:r,mapCanvasProjection:n})}},{key:"cluster",value:function(t){return this.noop(t)}}]),o}(Se),qe=6371008.8,Re={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*qe,kilometers:6371.0088,kilometres:6371.0088,meters:qe,metres:qe,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:qe/1852,radians:1,yards:6967335.223679999};function Ze(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Qe(t[0])||!Qe(t[1]))throw new Error("coordinates must contain numbers");return function(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}({type:"Point",coordinates:t},e,r)}function Ge(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function Be(t,e){void 0===e&&(e="kilometers");var r=Re[e];if(!r)throw new Error(e+" units is invalid");return t*r}function Ve(t){return t%360*Math.PI/180}function Ue(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return Be(function(t,e){void 0===e&&(e="kilometers");var r=Re[e];if(!r)throw new Error(e+" units is invalid");return t/r}(t,e),r)}function Qe(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function We(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Je(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}})),e.features=t.features.map((function(t){return Je(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Xe(t);default:throw new Error("unknown GeoJSON type")}}function Je(t){var e={type:"Feature"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}})),e.properties=Ke(t.properties),e.geometry=Xe(t.geometry),e}function Ke(t){var e={};return t?(Object.keys(t).forEach((function(r){var n=t[r];"object"==typeof n?null===n?e[r]=null:Array.isArray(n)?e[r]=n.map((function(t){return t})):e[r]=Ke(n):e[r]=n})),e):e}function Xe(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Xe(t)})),e):(e.coordinates=He(t.coordinates),e)}function He(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return He(t)}))}function Ye(t,e,r){if(null!==t)for(var n,i,o,s,a,u,c,f,l=0,h=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,m=d?t.features.length:1,y=0;y<m;y++){a=(f=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var b=0,_=0;if(null!==(s=f?c.geometries[v]:c)){u=s.coordinates;var w=s.type;switch(l=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,h,y,b,_))return!1;h++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],h,y,b,_))return!1;h++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-l;i++){if(!1===e(u[n][i],h,y,b,_))return!1;h++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(_=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-l;o++){if(!1===e(u[n][i][o],h,y,b,_))return!1;h++}_++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===Ye(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $e(t){var e=[];return Ye(t,(function(t){e.push(t)})),e}var tr=function(t,e,r){for(var n=t.length,i=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return r?Math.sqrt(i):i},er=tr,rr=function(t,e,r){var n=Math.abs(t-e);return r?n:n*n},nr=tr,ir=function(t,e){for(var r={},n=[],i=e<<2,o=t.length,s=t[0].length>0;n.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;r[u]||(r[u]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters");return n},or=function(t,e){var r=t[0].length?er:rr,n=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];o&&s.join("_");for(n.push(s);n.length<e;){for(var a=[],u=n.length,c=0,f=[],l=0;l<i;l++){for(var h=1/0,p=0;p<u;p++){var d=r(t[l],n[p]);d<=h&&(h=d)}a[l]=h}for(var g=0;g<i;g++)c+=a[g];for(var m=0;m<i;m++)f[m]={i:m,v:t[m],pr:a[m]/c,cs:0};f.sort((function(t,e){return t.pr-e.pr})),f[0].cs=f[0].pr;for(var y=1;y<i;y++)f[y].cs=f[y-1].cs+f[y].pr;for(var v=Math.random(),b=0;b<i-1&&f[b++].cs<v;);n.push(f[b-1].v)}return n};function sr(t,e,r){r=r||[];for(var n=0;n<t;n++)r[n]=e;return r}var ar=function(t,e,r,n){var i=[],o=[],s=[],a=[],u=!1,c=n||1e4,f=t.length,l=t[0].length,h=l>0,p=[];if(r)i="kmrand"==r?ir(t,e):"kmpp"==r?or(t,e):r;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*f);d[g]||(d[g]=!0,i.push(t[g]))}do{sr(e,0,p);for(var m=0;m<f;m++){for(var y=1/0,v=0,b=0;b<e;b++){(a=h?nr(t[m],i[b]):Math.abs(t[m]-i[b]))<=y&&(y=a,v=b)}s[m]=v,p[v]++}for(var _=[],w=(o=[],0);w<e;w++)_[w]=h?sr(l,0,_[w]):0,o[w]=i[w];if(h){for(var k=0;k<e;k++)i[k]=[];for(var M=0;M<f;M++)for(var x=_[s[M]],P=t[M],O=0;O<l;O++)x[O]+=P[O];u=!0;for(var C=0;C<e;C++){for(var E=i[C],S=_[C],A=o[C],L=p[C],j=0;j<l;j++)E[j]=S[j]/L||0;if(u)for(var T=0;T<l;T++)if(A[T]!=E[T]){u=!1;break}}}else{for(var I=0;I<f;I++){_[s[I]]+=t[I]}for(var N=0;N<e;N++)i[N]=_[N]/p[N]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--c<=0}while(!u);return{it:1e4-c,k:e,idxs:s,centroids:i}};var ur=function(t){i(o,t);var r=u(o);function o(t){var n;e(this,o);var i=t.numberOfClusters,s=ge(t,["numberOfClusters"]);return(n=r.call(this,s)).numberOfClusters=i,n}return n(o,[{key:"cluster",value:function(t){var e=t.markers,r=t.map,n=[];return 0===e.length||function(t,e){void 0===e&&(e={});var r=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(r/2)),e.numberOfClusters>r&&(e.numberOfClusters=r),!0!==e.mutate&&(t=We(t));var n=$e(t),i=n.slice(0,e.numberOfClusters),o=ar(n,e.numberOfClusters,i),s={};return o.centroids.forEach((function(t,e){s[e]=t})),function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}(t,(function(t,e){var r=o.idxs[e];t.properties.cluster=r,t.properties.centroid=s[r]})),t}(Ge(e.map((function(t){return Ze([t.getPosition().lng(),t.getPosition().lat()])}))),{numberOfClusters:this.numberOfClusters instanceof Function?this.numberOfClusters(e.length,r.getZoom()):this.numberOfClusters}).features.forEach((function(t,r){n[t.properties.cluster]||(n[t.properties.cluster]=new ke({position:{lng:t.properties.centroid[0],lat:t.properties.centroid[1]},markers:[]})),n[t.properties.cluster].push(e[r])})),n}}]),o}(Ae),cr=Object.keys||function(t){return jt(t,Tt)},fr=Object.assign,lr=Object.defineProperty,hr=!fr||y((function(){if(v&&1!==fr({b:1},fr(lr({},"a",{enumerable:!0,get:function(){lr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=fr({},t)[r]||cr(fr({},e)).join("")!=n}))?function(t,e){for(var r=L(t),n=arguments.length,i=1,o=Dt.f,s=w.f;n>i;)for(var a,u=O(arguments[i++]),c=o?cr(u).concat(o(u)):cr(u),f=c.length,l=0;f>l;)a=c[l++],v&&!s.call(u,a)||(r[a]=u[a]);return r}:fr;function pr(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dr(t,e,r){void 0===r&&(r={});var n=pr(t),i=pr(e),o=Ve(i[1]-n[1]),s=Ve(i[0]-n[0]),a=Ve(n[1]),u=Ve(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return Be(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r.units)}Wt({target:"Object",stat:!0,forced:Object.assign!==hr},{assign:hr});var gr=d((function(t){function e(t,e,r,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,r,n)}e.prototype.run=function(t,e,r,n){this._init(t,e,r,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},e.prototype._expandCluster=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[n]&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],r=0;r<this._datasetLength;r++){this.distance(this.dataset[t],this.dataset[r])<this.epsilon&&e.push(r)}return e},e.prototype._mergeArrays=function(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=e)})),mr=d((function(t){function e(t,e,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,r)}e.prototype.init=function(t,e,r){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==r&&(this.distance=r)},e.prototype.run=function(t,e){this.init(t,e);for(var r=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(f),a=0,u=0;u<f;u++)s[u]=0;for(var c=0;c<r;c++){var f=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<f;u++)s[u]+=this.dataset[c][u];a++}}if(a>0){for(u=0;u<f;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,r=this.dataset.length-1;do{e=Math.round(Math.random()*r),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,r=this.dataset.length,n=0;n<r;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===e[t=this.assignments[r]]&&(e[t]=[]),e[t].push(r);return e},e.prototype.argmin=function(t,e,r){for(var n,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=r(t,e[a]))<i&&(i=n,o=a);return o},e.prototype.distance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)},t.exports&&(t.exports=e)})),yr=d((function(t){function e(t,e,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,r)}e.prototype.insert=function(t,e){for(var r=this._queue.length,n=r;n--;){var i=this._priorities[n];"desc"===this._sorting?e>i&&(r=n):e<i&&(r=n)}this._insertAt(t,e,r)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,r=this._queue.length;e<r;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,r){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}r&&(this._sorting=r)},e.prototype._insertAt=function(t,e,r){this._queue.length===r?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(r,0,t),this._priorities.splice(r,0,e))},t.exports&&(t.exports=e)})),vr=d((function(t){if(t.exports)var e=yr;function r(t,e,r,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,r,n)}r.prototype.run=function(t,r,n,i){this._init(t,r,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,r=this._orderedList.length;e<r;e++){var n=this._orderedList[e],i=this._reachability[n];t.push([n,i])}return t},r.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},r.prototype._updateQueue=function(t,e,r){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===n._processed[e]){var i=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,i);void 0===n._reachability[e]?(n._reachability[e]=o,r.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,r.remove(e),r.insert(e,o))}}))},r.prototype._expandCluster=function(t,e){for(var r=e.getElements(),n=0,i=r.length;n<i;n++){var o=r[n];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,r=0;r<e;r++){if(this._regionQuery(t,r).length>=this.minPts)return r}},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var r=[],n=0,i=this.dataset.length;n<i;n++)this.distance(this.dataset[t],this.dataset[n])<e&&r.push(n);return r},r.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=r)})),br=d((function(t){t.exports&&(t.exports={DBSCAN:gr,KMEANS:mr,OPTICS:vr,PriorityQueue:yr})}));br.DBSCAN,br.KMEANS,br.OPTICS,br.PriorityQueue;var _r={units:"kilometers",mutate:!1,minPoints:1},wr=function(t){i(o,t);var r=u(o);function o(t){var n;e(this,o);var i=t.maxDistance,s=void 0===i?200:i,a=t.minPoints,u=void 0===a?_r.minPoints:a,c=ge(t,["maxDistance","minPoints"]);return(n=r.call(this,c)).maxDistance=s,n.options=Object.assign(Object.assign({},_r),{minPoints:u}),n}return n(o,[{key:"cluster",value:function(t){var e=t.markers,r=t.mapCanvasProjection,n=Ge(e.map((function(t){var e=r.fromLatLngToContainerPixel(t.getPosition());return Ze([e.x,e.y])}))),i=[];return function(t,e,r){void 0===r&&(r={}),!0!==r.mutate&&(t=We(t)),r.minPoints=r.minPoints||3;var n=new br.DBSCAN,i=n.run($e(t),Ue(e,r.units),r.minPoints,dr),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster=o,r.properties.dbscan="core"}))})),n.noise.forEach((function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster?r.properties.dbscan="edge":r.properties.dbscan="noise"})),t}(n,this.maxDistance,this.options).features.forEach((function(t,r){i[t.properties.cluster]||(i[t.properties.cluster]=[]),i[t.properties.cluster].push(e[r])})),i.map((function(t){return new ke({markers:t})}))}}]),o}(Ae);function kr(t,e,r,n,i,o){if(i-n<=r)return;const s=n+i>>1;Mr(t,e,s,n,i,o%2),kr(t,e,r,n,s-1,o+1),kr(t,e,r,s+1,i,o+1)}function Mr(t,e,r,n,i,o){for(;i>n;){if(i-n>600){const s=i-n+1,a=r-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1);Mr(t,e,r,Math.max(n,Math.floor(r-a*c/s+f)),Math.min(i,Math.floor(r+(s-a)*c/s+f)),o)}const s=e[2*r+o];let a=n,u=i;for(xr(t,e,n,r),e[2*i+o]>s&&xr(t,e,n,i);a<u;){for(xr(t,e,a,u),a++,u--;e[2*a+o]<s;)a++;for(;e[2*u+o]>s;)u--}e[2*n+o]===s?xr(t,e,n,u):(u++,xr(t,e,u,i)),u<=r&&(n=u+1),r<=u&&(i=u-1)}}function xr(t,e,r,n){Pr(t,r,n),Pr(e,2*r,2*n),Pr(e,2*r+1,2*n+1)}function Pr(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Or(t,e,r,n){const i=t-r,o=e-n;return i*i+o*o}const Cr=t=>t[0],Er=t=>t[1];class Sr{constructor(t,e=Cr,r=Er,n=64,i=Float64Array){this.nodeSize=n,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),a=this.coords=new i(2*t.length);for(let n=0;n<t.length;n++)s[n]=n,a[2*n]=e(t[n]),a[2*n+1]=r(t[n]);kr(s,a,n,0,s.length-1,0)}range(t,e,r,n){return function(t,e,r,n,i,o,s){const a=[0,t.length-1,0],u=[];let c,f;for(;a.length;){const l=a.pop(),h=a.pop(),p=a.pop();if(h-p<=s){for(let s=p;s<=h;s++)c=e[2*s],f=e[2*s+1],c>=r&&c<=i&&f>=n&&f<=o&&u.push(t[s]);continue}const d=Math.floor((p+h)/2);c=e[2*d],f=e[2*d+1],c>=r&&c<=i&&f>=n&&f<=o&&u.push(t[d]);const g=(l+1)%2;(0===l?r<=c:n<=f)&&(a.push(p),a.push(d-1),a.push(g)),(0===l?i>=c:o>=f)&&(a.push(d+1),a.push(h),a.push(g))}return u}(this.ids,this.coords,t,e,r,n,this.nodeSize)}within(t,e,r){return function(t,e,r,n,i,o){const s=[0,t.length-1,0],a=[],u=i*i;for(;s.length;){const c=s.pop(),f=s.pop(),l=s.pop();if(f-l<=o){for(let i=l;i<=f;i++)Or(e[2*i],e[2*i+1],r,n)<=u&&a.push(t[i]);continue}const h=Math.floor((l+f)/2),p=e[2*h],d=e[2*h+1];Or(p,d,r,n)<=u&&a.push(t[h]);const g=(c+1)%2;(0===c?r-i<=p:n-i<=d)&&(s.push(l),s.push(h-1),s.push(g)),(0===c?r+i>=p:n+i>=d)&&(s.push(h+1),s.push(f),s.push(g))}return a}(this.ids,this.coords,t,e,r,this.nodeSize)}}const Ar={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},Lr=Math.fround||(jr=new Float32Array(1),t=>(jr[0]=+t,jr[0]));var jr;class Tr{constructor(t){this.options=Zr(Object.create(Ar),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:r,maxZoom:n,nodeSize:i}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let s=[];for(let e=0;e<t.length;e++)t[e].geometry&&s.push(Nr(t[e],e));this.trees[n+1]=new Sr(s,Gr,Br,i,Float32Array),e&&console.timeEnd(o);for(let t=n;t>=r;t--){const r=+Date.now();s=this._cluster(s,t),this.trees[t]=new Sr(s,Gr,Br,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,s.length,+Date.now()-r)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let r=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,i=180;else if(r>i){const t=this.getClusters([r,n,180,o],e),s=this.getClusters([-180,n,i,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(zr(r),qr(o),zr(i),qr(n)),u=[];for(const t of a){const e=s.points[t];u.push(e.numPoints?Dr(e):this.points[e.index])}return u}getChildren(t){const e=this._getOriginId(t),r=this._getOriginZoom(t),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const o=i.points[e];if(!o)throw new Error(n);const s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=i.within(o.x,o.y,s),u=[];for(const e of a){const r=i.points[e];r.parentId===t&&u.push(r.numPoints?Dr(r):this.points[r.index])}if(0===u.length)throw new Error(n);return u}getLeaves(t,e,r){e=e||10,r=r||0;const n=[];return this._appendLeaves(n,t,e,r,0),n}getTile(t,e,r){const n=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,u=(r-a)/i,c=(r+1+a)/i,f={features:[]};return this._addTileFeatures(n.range((e-a)/i,u,(e+1+a)/i,c),n.points,e,r,i,f),0===e&&this._addTileFeatures(n.range(1-a/i,u,1,c),n.points,i,r,i,f),e===i-1&&this._addTileFeatures(n.range(0,u,a/i,c),n.points,-1,r,i,f),f.features.length?f:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e}_appendLeaves(t,e,r,n,i){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?i+o.point_count<=n?i+=o.point_count:i=this._appendLeaves(t,o.cluster_id,r,n,i):i<n?i++:t.push(e),t.length===r)break}return i}_addTileFeatures(t,e,r,n,i,o){for(const s of t){const t=e[s],a=t.numPoints;let u,c,f;if(a)u=Fr(t),c=t.x,f=t.y;else{const e=this.points[t.index];u=e.properties,c=zr(e.geometry.coordinates[0]),f=qr(e.geometry.coordinates[1])}const l={type:1,geometry:[[Math.round(this.options.extent*(c*i-r)),Math.round(this.options.extent*(f*i-n))]],tags:u};let h;a?h=t.id:this.options.generateId?h=t.index:this.points[t.index].id&&(h=this.points[t.index].id),void 0!==h&&(l.id=h),o.features.push(l)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const r=[],{radius:n,extent:i,reduce:o,minPoints:s}=this.options,a=n/(i*Math.pow(2,e));for(let n=0;n<t.length;n++){const i=t[n];if(i.zoom<=e)continue;i.zoom=e;const u=this.trees[e+1],c=u.within(i.x,i.y,a),f=i.numPoints||1;let l=f;for(const t of c){const r=u.points[t];r.zoom>e&&(l+=r.numPoints||1)}if(l>=s){let t=i.x*f,s=i.y*f,a=o&&f>1?this._map(i,!0):null;const h=(n<<5)+(e+1)+this.points.length;for(const r of c){const n=u.points[r];if(n.zoom<=e)continue;n.zoom=e;const c=n.numPoints||1;t+=n.x*c,s+=n.y*c,n.parentId=h,o&&(a||(a=this._map(i,!0)),o(a,this._map(n)))}i.parentId=h,r.push(Ir(t/l,s/l,h,l,a))}else if(r.push(i),l>1)for(const t of c){const n=u.points[t];n.zoom<=e||(n.zoom=e,r.push(n))}}return r}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?Zr({},t.properties):t.properties;const r=this.points[t.index].properties,n=this.options.map(r);return e&&n===r?Zr({},n):n}}function Ir(t,e,r,n,i){return{x:Lr(t),y:Lr(e),zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function Nr(t,e){const[r,n]=t.geometry.coordinates;return{x:Lr(zr(r)),y:Lr(qr(n)),zoom:1/0,index:e,parentId:-1}}function Dr(t){return{type:"Feature",id:t.id,properties:Fr(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),Rr(t.y)]}};var e}function Fr(t){const e=t.numPoints,r=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return Zr(Zr({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function zr(t){return t/360+.5}function qr(t){const e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function Rr(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function Zr(t,e){for(const r in e)t[r]=e[r];return t}function Gr(t){return t.x}function Br(t){return t.y}var Vr=function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(i=n;0!=i--;)if(!t(e[i],r[i]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],r.get(i[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(i of e.entries())if(!r.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if((n=e.length)!=r.length)return!1;for(i=n;0!=i--;)if(e[i]!==r[i])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(o=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var s=o[i];if(!t(e[s],r[s]))return!1}return!0}return e!=e&&r!=r},Ur=function(t){i(o,t);var r=u(o);function o(t){var n;e(this,o);var i=t.maxZoom,s=ge(t,["maxZoom"]);return(n=r.call(this,{maxZoom:i})).superCluster=new Tr(Object.assign({maxZoom:n.maxZoom,radius:60},s)),n}return n(o,[{key:"calculate",value:function(t){if(!Vr(t.markers,this.markers)){this.markers=t.markers;var e=this.markers.map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.getPosition().lng(),t.getPosition().lat()]},properties:{marker:t}}}));this.superCluster.load(e)}return this.cluster(t)}},{key:"cluster",value:function(t){var e=t.map,r=e.getBounds().toJSON(),n=r.west,i=r.south,o=r.east,s=r.north;return this.superCluster.getClusters([n,i,o,s],e.getZoom()).map(this.transformCluster.bind(this))}},{key:"transformCluster",value:function(t){var e=c(t.geometry.coordinates,2),r=e[0],n=e[1],i=t.properties;if(i.cluster)return new ke({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map((function(t){return t.properties.marker})),position:new google.maps.LatLng({lat:n,lng:r})});var o=i.marker;return new ke({markers:[o],position:o.getPosition()})}}]),o}(Se),Qr=At.indexOf,Wr=[].indexOf,Jr=!!Wr&&1/[1].indexOf(1,-0)<0,Kr=ve("indexOf");Wt({target:"Array",proto:!0,forced:Jr||!Kr},{indexOf:function(t){return Jr?Wr.apply(this,arguments)||0:Qr(this,t,arguments.length>1?arguments[1]:void 0)}});var Xr=function(t,e,r){var n=A(e);n in t?G.f(t,n,k(0,r)):t[n]=r},Hr=pe("splice"),Yr=Math.max,$r=Math.min,tn=9007199254740991,en="Maximum allowed length exceeded";Wt({target:"Array",proto:!0,forced:!Hr},{splice:function(t,e){var r,n,i,o,s,a,u=L(this),c=Pt(u.length),f=Et(t,c),l=arguments.length;if(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=$r(Yr(Mt(e),0),c-f)),c+r-n>tn)throw TypeError(en);for(i=ue(u,n),o=0;o<n;o++)(s=f+o)in u&&Xr(i,o,u[s]);if(i.length=n,r<n){for(o=f;o<c-n;o++)a=o+r,(s=o+n)in u?u[a]=u[s]:delete u[a];for(o=c;o>c-n+r;o--)delete u[o-1]}else if(r>n)for(o=c-n;o>f;o--)a=o+r-1,(s=o+n-1)in u?u[a]=u[s]:delete u[a];for(o=0;o<r;o++)u[o+f]=arguments[o+2];return u.length=c-n+r,i}});var rn,nn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return R(r),function(t){if(!S(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),on=function(t,e,r){var n,i;return nn&&"function"==typeof(n=e.constructor)&&n!==r&&S(i=n.prototype)&&i!==r.prototype&&nn(t,i),t},sn=v?Object.defineProperties:function(t,e){R(t);for(var r,n=cr(e),i=n.length,o=0;i>o;)G.f(t,r=n[o++],e[r]);return t},an=_t("document","documentElement"),un=ot("IE_PROTO"),cn=function(){},fn=function(t){return"<script>"+t+"</"+"script>"},ln=function(){try{rn=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ln=rn?function(t){t.write(fn("")),t.close();var e=t.parentWindow.Object;return t=null,e}(rn):((e=D("iframe")).style.display="none",an.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(fn("document.F=Object")),t.close(),t.F);for(var r=Tt.length;r--;)delete ln.prototype[Tt[r]];return ln()};st[un]=!0;var hn=Object.create||function(t,e){var r;return null!==t?(cn.prototype=R(t),r=new cn,cn.prototype=null,r[un]=t):r=ln(),void 0===e?r:sn(r,e)},pn="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",dn=RegExp("^"+pn+pn+"*"),gn=RegExp(pn+pn+"*$"),mn=function(t){return function(e){var r=String(C(e));return 1&t&&(r=r.replace(dn,"")),2&t&&(r=r.replace(gn,"")),r}},yn={start:mn(1),end:mn(2),trim:mn(3)},vn=Nt.f,bn=q.f,_n=G.f,wn=yn.trim,kn="Number",Mn=m.Number,xn=Mn.prototype,Pn=x(hn(xn))==kn,On=function(t){var e,r,n,i,o,s,a,u,c=A(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=wn(c)).charCodeAt(0))||45===e){if(88===(r=c.charCodeAt(2))||120===r)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+c}for(s=(o=c.slice(2)).length,a=0;a<s;a++)if((u=o.charCodeAt(a))<48||u>i)return NaN;return parseInt(o,n)}return+c};if(Ut(kn,!Mn(" 0o1")||!Mn("0b1")||Mn("+0x1"))){for(var Cn,En=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof En&&(Pn?y((function(){xn.valueOf.call(r)})):x(r)!=kn)?on(new Mn(On(e)),r,En):On(e)},Sn=v?vn(Mn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),An=0;Sn.length>An;An++)T(Mn,Cn=Sn[An])&&!T(En,Cn)&&_n(En,Cn,bn(Mn,Cn));En.prototype=xn,xn.constructor=En,yt(m,kn,En)}var Ln=function t(r,n){e(this,t),this.markers={sum:r.length};var i=n.map((function(t){return t.count})),o=i.reduce((function(t,e){return t+e}),0);this.clusters={count:n.length,markers:{mean:o/n.length,sum:o,min:Math.min.apply(Math,f(i)),max:Math.max.apply(Math,f(i))}}},jn=function(){function t(){e(this,t)}return n(t,[{key:"render",value:function(t,e){var r=t.count,n=t.position,i=r>Math.max(10,e.clusters.markers.mean)?"#ff0000":"#0000ff",o=window.btoa('\n  <svg fill="'.concat(i,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n    <circle cx="120" cy="120" opacity=".1" r="130" />\n  </svg>'));return new google.maps.Marker({position:n,icon:{url:"data:image/svg+xml;base64,".concat(o),scaledSize:new google.maps.Size(45,45)},label:{text:String(r),color:"rgba(255,255,255,0.9)",fontSize:"12px"},zIndex:Number(google.maps.Marker.MAX_ZINDEX)+r})}}]),t}();var Tn,In=function t(){e(this,t),function(t,e){for(var r in e.prototype)t.prototype[r]=e.prototype[r]}(t,google.maps.OverlayView)};t.MarkerClustererEvents=void 0,(Tn=t.MarkerClustererEvents||(t.MarkerClustererEvents={})).CLUSTERING_BEGIN="clusteringbegin",Tn.CLUSTERING_END="clusteringend",Tn.CLUSTER_CLICK="click";var Nn=function(t,e,r){r.fitBounds(e.bounds)},Dn=function(r){i(s,r);var o=u(s);function s(t){var r,n=t.map,i=t.markers,a=void 0===i?[]:i,u=t.algorithm,c=void 0===u?new Ur({}):u,f=t.renderer,l=void 0===f?new jn:f,h=t.onClusterClick,p=void 0===h?Nn:h;return e(this,s),(r=o.call(this)).markers=a,r.clusters=[],r.algorithm=c,r.renderer=l,r.onClusterClick=p,n&&r.setMap(n),r}return n(s,[{key:"addMarker",value:function(t,e){this.markers.push(t),e||this.render()}},{key:"addMarkers",value:function(t,e){var r=this;t.forEach((function(t){r.addMarker(t,!0)})),e||this.render()}},{key:"removeMarker",value:function(t,e){var r=this.markers.indexOf(t);return-1!==r&&(t.setMap(null),this.markers.splice(r,1),e||this.render(),!0)}},{key:"removeMarkers",value:function(t,e){var r=this,n=!1;return t.forEach((function(t){n=n||r.removeMarker(t,!0)})),n&&!e&&this.render(),n}},{key:"clearMarkers",value:function(t){var e=this;this.markers.forEach((function(t){return e.removeMarker(t,!0)})),t||this.render()}},{key:"render",value:function(){var e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,t.MarkerClustererEvents.CLUSTERING_BEGIN,this);var r=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});this.reset(),this.clusters=r,this.renderClusters(),google.maps.event.trigger(this,t.MarkerClustererEvents.CLUSTERING_END,this)}}},{key:"onAdd",value:function(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach((function(t){return t.setMap(null)})),this.markers.forEach((function(t){return t.setMap(null)})),this.clusters.forEach((function(t){return t.delete()})),this.clusters=[]}},{key:"renderClusters",value:function(){var e=this,r=new Ln(this.markers,this.clusters),n=this.getMap();this.clusters.forEach((function(i){1===i.markers.length?i.marker=i.markers[0]:(i.marker=e.renderer.render(i,r),e.onClusterClick&&i.marker.addListener("click",(function(r){google.maps.event.trigger(e,t.MarkerClustererEvents.CLUSTER_CLICK,i),e.onClusterClick(r,i,n)}))),i.marker.setMap(n)}))}}]),s}(In);return t.AbstractAlgorithm=Se,t.AbstractViewportAlgorithm=Ae,t.Cluster=ke,t.ClusterStats=Ln,t.DBScanAlgorithm=wr,t.DefaultRenderer=jn,t.GridAlgorithm=Fe,t.KmeansAlgorithm=ur,t.MarkerClusterer=Dn,t.NoopAlgorithm=ze,t.SuperClusterAlgorithm=Ur,t.defaultOnClusterClickHandler=Nn,t.distanceBetweenPoints=Pe,t.extendBoundsToPaddedViewport=xe,t.extendPixelBounds=Ce,t.filterMarkersToPaddedViewport=Me,t.noop=Le,t.pixelBoundsToLatLngBounds=Ee,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=index.min.js.map
